---
layout: page
title: Installation
---
<div class="container">
	<h1 class="page-header">{{ page.title }}}</h1>

	<div class="content-table well span3">
	<ul class="nav nav-list">
		<li class="nav-header"><i class="icon-reorder"></i> Table of Contents</li>
		<li><a href="#requirements">Requirements</a></li>
		<li><a href="#install">Install</a></li>
		<li><a href="#install-plugin" class="sub-nav">Plugin</a></li>
		<li><a href="#install-dependencies" class="sub-nav">Dependencies</a></li>
		<li><a href="#install-configure" class="sub-nav">Configure Cake</a></li>
		<li><a href="#config">Configuration</a></li>
		<li><a href="#update">Update</a></li>
	</ul>
	</div>


	<h2 id="requirements">Requirements</h2>
	<ul>
		<li><a href="http://cakephp.org/">CakePHP 2.1+</a></li>
		<li>Php 5.3+</li>
		<li><a href="http://redis.io/">Redis 2.2+</a></li>
		<li><a href="https://github.com/nicolasff/phpredis">PhpRedis</a></li>
	</ul>

	<div class="alert alert-info"><strong>Tips</strong>  Installing PhpRedis is recommended, but if you can't,
	it will fallback to Redisent, another Redis API for php, shipped with the plugin.</div>

	<h2 id="install">Install</h2>

	<ol>
		<li>
			<h3 id="install-plugin">Download the plugin</h3>

			<pre><code class="language-bash">cd you-application/app/Plugin
git clone git://github.com/kamisama/Cake-Resque.git CakeResque</code></pre>

			<p>Or you can just download the <a href="https://github.com/kamisama/Cake-Resque/zipball/master">lastest release archive</a>, and uncompress it in you <em>app/Plugin</em> folder. Make sure that the plugin folder is named <b>CakeResque</b>.</p>

		</li>

		<li>
			<h3 id="install-dependencies">Install dependencies</h3>
			<p>This plugin requires the php-resque library, that is not shipped anymore by default.</p>
			<pre><code class="language-bash">cd your/application/Plugin/CakeResque # or just cd ./CakeResque if already in the Plugin folder</code></pre>

			<p>Download Composer, if not already done

			<pre><code class="language-bash">curl -s https://getcomposer.org/installer | php</code></pre>

			<p>Install dependencies</p>

			<pre><code class="language-bash">php composer.phar install</code></pre>



			<p>Your final directory structure should looks like that</p>


			<ul>
				<li><b>app</b>
				<ul>
					<li><b>Plugin</b>
						<ul>
							<li>YourOtherPlugin...</li>
							<li><b>CakeResque</b>
								<ul>
									<li>Config</li>
									<li>Console</li>
									<li>OtherFolders...</li>
									<li><b>vendor</b>
										<ul>
											<li>composer</li>
											<li>other_folders...</li>
											<li>kamisama
												<ul>
													<li>php-resque-ex</li>
												</ul>
											</li>
										</ul>
									</li>
								</ul>
							</li>
						</ul>
					</li>
				</ul>
			</li>



		</ul>

		<div class="alert">Yes, the vendor folder name is lowercase, to make Composer happier.</div>

		</li>

		<li>
			<h3 id="install-configure">Load the plugin into CakePHP</h3>
			<ol>
				<li><p>Load the Plugin in your <em>app/Config/bootstrap.php</em></p>

				<pre><code class="language-php">CakePlugin::loadAll(array(
	'CakeResque' => array('bootstrap' => true)
));</code></pre>
				</li>
				<li>
					<p>Create the <strong>AppShell.php</strong> file in <em>app/Console/Command</em>, if it doesn't exist</p>
				</li>

				<li>
					<p>Add the following method to AppShell.php</p>

					<pre><code class="language-php">public function perform() {
	$this->initialize();
	$this->{array_shift($this->args)}();
}</code></pre>

				<div class="alert"><strong>Remember</strong> All your shell classes must extends AppShell</div>
				</li>
			</ol>
		</li>

	</ol>


	<h2 id="config">Configuration</h2>

	<p>All configuration are done in the plugin bootstrap file. Documentation <a href="https://github.com/kamisama/Cake-Resque/blob/master/Config/bootstrap.php">inside</a>.</p>

	<h2 id="update">Update</h2>

	<div class="alert">A clean install is recommended if you upgrade from a version below 1.0</div>

	<ol>
		<li>Backup your bootstrap.php file, in <code>CakeResque/Config/</code></li>
		<li>Download the new version and replace the <em>CakeResque</em> folder with the new one</li>
		<li>Restore your bootstrap.php. Read the versions releases notes (in the changelog) for new changes in bootstrap.</li>
		<li><a href="#install-dependencies">Re-install all Composer dependencies</a></li>
	</ol>

	<p>Occasionally, you should update the dependencies, even if there's no plugin new version.</p>

	<pre><code class="language-bash">cd app/Plugin/CakeResque
php composer.phar update</code></pre>


</div>